<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Story Reader - Pro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #8e44ad; /* Main Purple */
            --secondary-color: #9b59b6; /* Lighter Action Purple */
            --accent-color: #e74c3c;   /* Red for incorrect */
            --correct-color: #27ae60;  /* Green for correct */
            --dark-bg: #4a235a;       /* Deep Purple for bars */
            --light-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Poppins', 'Noto Sans KR', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 20px 120px 20px;
            background: linear-gradient(135deg, #f2eaff 0%, #e8daef 100%);
            color: var(--text-color);
        }
        .container {
            background-color: var(--light-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 700px;
            box-sizing: border-box;
            margin-top: 20px;
        }
        h1, h2, h3 {
            color: var(--dark-bg);
            text-align: center;
        }
        h1 { margin-bottom: 20px; font-size: 2.2em; font-weight: 700; color: var(--primary-color); text-shadow: 1px 1px 2px rgba(0,0,0,0.1);}
        h2 { margin-bottom: 15px; font-size: 1.5em; border-bottom: 2px solid #eee; padding-bottom: 10px;}
        h3 { font-size: 1.2em; margin-top: 25px; margin-bottom: 10px; background-color: #f4eff7; padding: 8px; border-radius: 8px; }

        input[type="text"], select {
            padding: 12px; margin: 10px auto; width: 100%; max-width: 400px; display: block; font-size: 17px; border: 1px solid #dcbcf0; border-radius: 8px; box-sizing: border-box; background-color: #fdfaff;
        }
        input[type="text"]:focus, select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 8px rgba(142, 68, 173, 0.4);
            outline: none;
        }
        
        button {
            padding: 12px 20px; margin: 5px; font-size: 16px; font-weight: 600; color: white; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s ease;
            display: inline-block; margin-left: 5px; margin-right: 5px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        button:disabled {
            background-color: #cccccc !important; color: #666 !important; cursor: not-allowed; box-shadow: none; transform: none;
        }

        .hidden { display: none !important; }

        /* --- Start Screen --- */
        #start-screen { text-align: center; }
        #logo-container { margin-bottom: 20px; }
        #logo-container img { max-width: 200px; height: auto; }
        #start-screen h1 { margin-top: 10px; }
        
        #level-display-start {
            font-weight: 600;
            font-size: 1.1em;
            color: var(--dark-bg);
            background-color: #f4eff7;
            margin-top: 15px;
            margin-bottom: 20px;
            padding: 8px 18px;
            border-radius: 8px;
            display: inline-block;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        #start-learning-btn { background-color: var(--primary-color); width: 100%; max-width: 400px; padding: 15px; font-size: 18px; display: block; margin: 20px auto; }

        /* --- Timer & Display --- */
        .timer-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--dark-bg);
            text-align: center;
            background: #f4eff7;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        #quiz-text-display, #review-text-display {
            padding: 20px; border: 1px solid #e0e0e0; border-radius: 10px; background-color: #fdfdfd; font-size: 1.1em;
            line-height: 1.8; margin-bottom: 20px; max-height: 400px; overflow-y: auto;
        }
        #quiz-text-display u, #review-text-display u {
            text-decoration: none; background-color: #fdebd0; padding: 2px 0; border-radius: 3px;
        }

        /* --- Quiz & Review Styles --- */
        #quiz-question, #review-question { font-weight: 600; font-size: 1.2em; margin-bottom: 15px; }
        .options-container { display: flex; flex-direction: column; gap: 10px; }
        .option-btn {
            width: 100%; text-align: left; background-color: #fff; color: var(--text-color); border: 2px solid #ddd;
            justify-content: flex-start; padding: 15px; box-sizing: border-box; margin: 0; display: block;
        }
        .option-btn:not(:disabled):hover { background-color: #f4eff7; border-color: var(--secondary-color); }
        .option-btn.correct { background-color: #d4efdf !important; border-color: var(--correct-color) !important; color: #1e8449 !important; }
        .option-btn.incorrect { background-color: #fadbd8 !important; border-color: var(--accent-color) !important; color: #c0392b !important; }
        .controls { text-align: right; margin-top: 20px; }

        /* --- Results Screen Styles --- */
        #results-summary { text-align: center; }
        #results-summary p { font-size: 1.2em; margin: 10px 0; }
        #results-list { display: flex; justify-content: center; gap: 15px; font-size: 1.5em; font-weight: bold; margin: 20px 0; }
        .result-item.correct { color: var(--correct-color); }
        .result-item.incorrect { color: var(--accent-color); }
        
        #sendDataBtn { background-color: var(--correct-color); }
        #end-btn { background-color: var(--dark-bg); }
        
        #review-btn, #nextReviewBtn {
            background-color: transparent; color: var(--secondary-color); border: 2px solid var(--secondary-color); font-weight: bold;
        }
        #review-btn:hover, #nextReviewBtn:hover { background-color: var(--secondary-color); color: white; }

        /* --- Fixed Bottom Controls --- */
        #bottom-controls-wrapper { position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000; }
        .fixed-controls {
            max-width: 800px; margin: 0 auto; background-color: var(--dark-bg); padding: 15px; 
            display: flex; justify-content: center; box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
        }
        #quiz-start-btn {
            width: 80%; padding: 15px; font-size: 18px; background-color: var(--secondary-color);
        }
    </style>
</head>
<body>

    <div id="main-content">
        <div class="container" id="start-screen">
            <div id="logo-container">
                <img src="mainlogo.png" alt="Logo">
            </div>
            <h1>English Story Reader Pro</h1>
            <p>Welcome! Please enter your name to begin.</p>
            <div id="level-display-start">4th Grade</div>
            <input type="text" id="userNameInput" placeholder="Your Name">
            <button id="start-learning-btn">학습 시작</button>
        </div>

        <div class="container hidden" id="selection-container">
            <h2 id="selection-title"></h2>
            <label for="storySelect">Choose a story:</label>
            <select id="storySelect">
                <option value="">-- Select a story --</option>
                <option value="musical_story">A Musical Story</option>
                <option value="building_shapes">Finding Shapes in Buildings</option>
                <option value="cooking_science">Cooking is Science!</option>
            </select>
        </div>

        <div class="container hidden" id="quiz-container">
            <h2 id="quiz-title">Comprehension Quiz</h2>
            <div id="quiz-timer-display" class="timer-display">00:00</div>
            <div id="quiz-text-display"></div>
            <p id="quiz-question"></p>
            <div id="quiz-options" class="options-container"></div>
        </div>

        <div class="container hidden" id="results-container">
            <h2>Results</h2>
            <div id="results-summary">
                <p>Quiz Time: <strong id="final-quiz-time"></strong></p>
                <p>Score: <strong id="final-score"></strong></p>
                <div id="results-list"></div>
                <div id="results-controls" style="margin-top: 20px;">
                    <button id="review-btn" class="hidden">틀린 문제 다시보기</button>
                    <button id="sendDataBtn" class="hidden">전송</button>
                    <button id="end-btn" class="hidden">END</button>
                </div>
            </div>
            <div id="review-screen" class="hidden">
                <h3>Review Incorrect Answers</h3>
                <div id="review-text-display"></div>
                <p id="review-question"></p>
                <div id="review-options" class="options-container"></div>
                 <div class="controls">
                    <button id="nextReviewBtn">Next Review</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="bottom-controls-wrapper" class="hidden">
        <div class="fixed-controls">
            <button id="quiz-start-btn" disabled>Select a story</button>
        </div>
    </div>

    <script>
        const stories = {
            musical_story: {
                level: "4th Grade",
                fullText: "Some stories are told not just with words, but with music. In a musical play, the characters sing songs to show how they are feeling. A happy song can show they are excited, while a slow, quiet song can show they are sad. The music helps tell the story and makes it more powerful. It's a special mix of a fun story and beautiful music.",
                quiz: [
                    { type: 'topic', question: 'What is this passage about?', options: ['How to write a song', 'How music helps tell a story in musicals', 'The saddest songs', 'The best stories to read'], answer: 1 },
                    { type: 'comprehension', question: 'In a musical, what can a slow, quiet song show?', options: ['That a character is excited', 'That a character is angry', 'That a character is sad', 'That a character is sleepy'], answer: 2 },
                    { type: 'insertion', question: "Where does the given sentence best fit?<br><br><i>\"The melody and speed of the music can change the feeling.\"</i>", options: ['( ① )', '( ② )', '( ③ )', '( ④ )'], answer: 0, modifiedText: "In a musical play, the characters sing songs to show how they are feeling. ( ① ) A happy song can show they are excited, while a slow, quiet song can show they are sad. ( ② ) The music helps tell the story and makes it more powerful. ( ③ ) It's a special mix of a fun story and beautiful music. ( ④ )" },
                    { type: 'vocabulary', question: 'Which word is used incorrectly in the context?', options: ['music', 'excited', 'weak', 'special'], answer: 2, modifiedText: "Some stories are told not just with words, but with <u>music</u>. A happy song can show they are <u>excited</u>, while a slow, quiet song can show they are sad. The music helps tell the story and makes it more <u>weak</u>. It's a <u>special</u> mix of a fun story and beautiful music." },
                    { type: 'summary', question: "Complete the summary.<br><br>A musical uses (A)______ to show characters' (B)______ and help tell the story.", options: [['books', 'names'], ['songs', 'feelings'], ['pictures', 'homes'], ['dances', 'ages']], answer: 1 }
                ]
            },
            building_shapes: {
                level: "4th Grade",
                fullText: "Look around at the buildings in your town. You can find many different shapes! A window might be a square or a rectangle. A roof might be a triangle. Some modern buildings might even have circles or domes. Architects use these basic shapes to design strong and beautiful buildings. It's like playing a fun game of finding shapes from your math class in the real world.",
                quiz: [
                    { type: 'topic', question: 'What is the main idea of the text?', options: ['Math class is fun', 'Buildings have many shapes', 'Architects are artists', 'Windows are always square'], answer: 1 },
                    { type: 'comprehension', question: 'Which shape is NOT mentioned as being part of a building?', options: ['Triangle', 'Star', 'Circle', 'Square'], answer: 1 },
                    { type: 'insertion', question: "Where does the given sentence best fit?<br><br><i>\"They are the building blocks of design.\"</i>", options: ['( ① )', '( ② )', '( ③ )', '( ④ )'], answer: 0, modifiedText: "A roof might be a triangle. Some modern buildings might even have circles or domes. ( ① ) Architects use these basic shapes to design strong and beautiful buildings. ( ② ) It's like playing a fun game of finding shapes from your math class in the real world. ( ③ )" },
                    { type: 'vocabulary', question: 'Which word is used incorrectly in the context?', options: ['different', 'square', 'weak', 'beautiful'], answer: 2, modifiedText: "You can find many <u>different</u> shapes! A window might be a <u>square</u> or a rectangle. ... Architects use these basic shapes to design <u>weak</u> and beautiful buildings." },
                    { type: 'summary', question: "Complete the summary.<br><br>Architects use basic (A)______ like squares and triangles to design (B)______ buildings.", options: [['colors', 'tall'], ['materials', 'new'], ['shapes', 'strong'], ['numbers', 'old']], answer: 2 }
                ]
            },
            cooking_science: {
                level: "4th Grade",
                fullText: "Did you know that cooking is a kind of science experiment? When you bake a cake, you mix ingredients like flour, sugar, and eggs. When you put the mix in a hot oven, a chemical change happens. The liquid batter turns into a soft, fluffy cake. When you boil an egg, the clear part turns white and solid. Every time you cook, you are being a little scientist in the kitchen!",
                quiz: [
                    { type: 'topic', question: 'What is the passage trying to tell us?', options: ['How to be a scientist', 'That cooking is like science', 'The best way to bake a cake', 'Why eggs turn white'], answer: 1 },
                    { type: 'comprehension', question: 'What happens to cake batter in a hot oven?', options: ['It stays liquid', 'It disappears', 'It has a chemical change', 'It becomes an egg'], answer: 2 },
                    { type: 'insertion', question: 'Where does the given sentence best fit?<br><br><i>"Heat causes this change."</i>', options: ['( ① )', '( ② )', '( ③ )', '( ④ )'], answer: 1, modifiedText: "When you bake a cake, you mix ingredients like flour, sugar, and eggs. ( ① ) When you put the mix in a hot oven, a chemical change happens. ( ② ) The liquid batter turns into a soft, fluffy cake. ( ③ ) When you boil an egg, the clear part turns white and solid. ( ④ )" },
                    { type: 'vocabulary', question: 'Which word is used incorrectly in the context?', options: ['ingredients', 'hot', 'hard', 'scientist'], answer: 2, modifiedText: "When you bake a cake, you mix <u>ingredients</u>... When you put the mix in a <u>hot</u> oven, a chemical change happens. The liquid batter turns into a <u>hard</u>, fluffy cake. Every time you cook, you are being a little <u>scientist</u> in the kitchen!" },
                    { type: 'summary', question: 'Complete the summary.<br><br>Cooking is like a (A)______ experiment because mixing ingredients and adding heat causes a (B)______ change.', options: [['fun', 'color'], ['science', 'chemical'], ['long', 'tasty'], ['magic', 'real']], answer: 1 }
                ]
            }
        };

        // --- DOM Elements ---
        const containers = {
            start: document.getElementById('start-screen'),
            selection: document.getElementById('selection-container'),
            quiz: document.getElementById('quiz-container'),
            results: document.getElementById('results-container'),
        };
        const userNameInput = document.getElementById('userNameInput');
        const startLearningBtn = document.getElementById('start-learning-btn');
        const selectionTitle = document.getElementById('selection-title');
        const storySelect = document.getElementById('storySelect');
        const quizStartBtn = document.getElementById('quiz-start-btn');
        const bottomControls = document.getElementById('bottom-controls-wrapper');
        const quizTimerDisplay = document.getElementById('quiz-timer-display');
        const quizTextDisplay = document.getElementById('quiz-text-display');
        const quizQuestion = document.getElementById('quiz-question');
        const quizOptions = document.getElementById('quiz-options');
        const resultsSummary = document.getElementById('results-summary');
        const reviewBtn = document.getElementById('review-btn');
        const reviewScreen = document.getElementById('review-screen');
        const nextReviewBtn = document.getElementById('nextReviewBtn');
        const sendDataBtn = document.getElementById('sendDataBtn');
        const endBtn = document.getElementById('end-btn');

        // --- State Variables ---
        let userName = '';
        let currentStoryData = {};
        let currentQuizIndex = 0;
        let userAnswers = [];
        let incorrectQuestionIndices = [];
        let currentReviewIndex = 0;
        let timerInterval = null;
        let timerStartTime = 0;
        let quizTime = 0;

        // --- Event Listeners ---
        startLearningBtn.addEventListener('click', () => {
            userName = userNameInput.value.trim();
            if (userName) {
                selectionTitle.textContent = `Welcome, ${userName}!`;
                showContainer('selection');
                bottomControls.classList.remove('hidden');
            } else {
                alert('Please enter your name.');
            }
        });
        storySelect.addEventListener('change', loadStory);
        quizStartBtn.addEventListener('click', startQuiz);
        reviewBtn.addEventListener('click', startReview);
        nextReviewBtn.addEventListener('click', handleNextReview);
        sendDataBtn.addEventListener('click', sendData);
        endBtn.addEventListener('click', returnToSelection);

        // --- Core Functions ---
        function loadStory() {
            const storyId = storySelect.value;
            resetQuizState();
            if (storyId) {
                currentStoryData = stories[storyId];
                quizStartBtn.disabled = false;
                quizStartBtn.textContent = 'Start Quiz';
            }
        }

        function startQuiz() {
            showContainer('quiz');
            bottomControls.classList.add('hidden');
            startTimer(quizTimerDisplay);
            displayQuestion(0);
        }

        function displayQuestion(index) {
            currentQuizIndex = index;
            const q = currentStoryData.quiz[index];
            
            if (q.modifiedText) {
                 quizTextDisplay.innerHTML = q.modifiedText;
            } else {
                 quizTextDisplay.innerHTML = currentStoryData.fullText.replace(/\n/g, '<br>');
            }
            quizQuestion.innerHTML = `<b>Q${index + 1}.</b> ${q.question}`;
            quizOptions.innerHTML = '';
            
            q.options.forEach((option, i) => {
                const button = document.createElement('button');
                if (Array.isArray(option)) { // For summary questions
                    button.innerHTML = `(A) ${option[0]} / (B) ${option[1]}`;
                } else {
                    button.innerHTML = option;
                }
                button.classList.add('option-btn');
                button.onclick = () => selectAnswer(i);
                quizOptions.appendChild(button);
            });
        }
        
        function selectAnswer(selectedIndex) {
            userAnswers.push(selectedIndex);
            if (currentQuizIndex < currentStoryData.quiz.length - 1) {
                displayQuestion(currentQuizIndex + 1);
            } else {
                quizTime = stopTimer();
                showResults();
            }
        }

        function showResults() {
            showContainer('results');
            let score = 0;
            const resultsList = document.getElementById('results-list');
            resultsList.innerHTML = '';
            
            userAnswers.forEach((answer, i) => {
                const isCorrect = answer === currentStoryData.quiz[i].answer;
                if (isCorrect) score++;
                else incorrectQuestionIndices.push(i);

                const resultItem = document.createElement('span');
                resultItem.classList.add('result-item', isCorrect ? 'correct' : 'incorrect');
                resultItem.textContent = `${i + 1}. ${isCorrect ? 'O' : 'X'}`;
                resultsList.appendChild(resultItem);
            });
            
            const percentageScore = Math.round((score / currentStoryData.quiz.length) * 100);
            document.getElementById('final-quiz-time').textContent = formatTime(quizTime);
            document.getElementById('final-score').textContent = `${percentageScore}점`;

            if (incorrectQuestionIndices.length > 0) {
                reviewBtn.classList.remove('hidden');
            } else {
                sendDataBtn.classList.remove('hidden');
            }
            endBtn.classList.remove('hidden');
        }
        
        function startReview() {
            resultsSummary.classList.add('hidden');
            reviewScreen.classList.remove('hidden');
            displayReviewQuestion(0);
        }

        function displayReviewQuestion(reviewIndex) {
            currentReviewIndex = reviewIndex;
            const qIndex = incorrectQuestionIndices[reviewIndex];
            const q = currentStoryData.quiz[qIndex];
            const userAnswer = userAnswers[qIndex];
            
            if (q.modifiedText) {
                document.getElementById('review-text-display').innerHTML = q.modifiedText;
            } else {
                document.getElementById('review-text-display').innerHTML = currentStoryData.fullText.replace(/\n/g, '<br>');
            }

            document.getElementById('review-question').innerHTML = `<b>Q${qIndex + 1}.</b> ${q.question}`;
            const reviewOptionsContainer = document.getElementById('review-options');
            reviewOptionsContainer.innerHTML = '';

            q.options.forEach((option, i) => {
                const button = document.createElement('button');
                if (Array.isArray(option)) { // For summary questions
                    button.innerHTML = `(A) ${option[0]} / (B) ${option[1]}`;
                } else {
                    button.innerHTML = option;
                }
                button.classList.add('option-btn');
                button.disabled = true;
                if (i === q.answer) button.classList.add('correct');
                if (i === userAnswer) button.classList.add('incorrect');
                reviewOptionsContainer.appendChild(button);
            });
            
            if (reviewIndex >= incorrectQuestionIndices.length - 1) {
                 nextReviewBtn.textContent = 'Return to Results';
            }
        }
        
        function handleNextReview() {
            if (currentReviewIndex >= incorrectQuestionIndices.length - 1) {
                reviewScreen.classList.add('hidden');
                resultsSummary.classList.remove('hidden');
                reviewBtn.classList.add('hidden');
                sendDataBtn.classList.remove('hidden');
            } else {
                displayReviewQuestion(currentReviewIndex + 1);
            }
        }
        
   function sendData() {
    // 이 URL은 사용자님의 것이 맞는지 다시 한번 확인해주세요.
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxXBIvCN9wqJAkV3XeXbfpb15KzKs8T8rLcUR0jWLgvD_tqg5VxeOINq_7QRKEPSNMS/exec';

    sendDataBtn.disabled = true;
    sendDataBtn.textContent = "전송 중...";

    const scoreText = document.getElementById('final-score').textContent;
    const titleText = storySelect.options[storySelect.selectedIndex].text;
    const data = {
        user: userName,
        level: currentStoryData.level,
        title: titleText,
        quizTime: formatTime(quizTime),
        score: scoreText
    };

    fetch(SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors', // CORS 에러를 우회하여 안정적으로 데이터를 보내는 모드
        cache: 'no-cache',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(response => {
        // no-cors 모드에서는 서버의 실제 성공/실패 여부를 알 수 없지만,
        // 일단 요청이 시작되면 성공으로 간주하고 알림을 띄웁니다.
        console.log("Request sent. Check Google Sheet for data.");
        alert("데이터 전송이 완료되었습니다!");
        sendDataBtn.textContent = "전송 완료";
    })
    .catch(error => {
        // 이 부분은 네트워크 연결 자체에 문제가 있을 때만 실행됩니다.
        console.error('Network error or failed to fetch:', error);
        alert('데이터 전송 중 네트워크 오류가 발생했습니다. 인터넷 연결을 확인해주세요.');
        sendDataBtn.disabled = false;
        sendDataBtn.textContent = "전송";
    });
}

        // --- Utility Functions ---
        function startTimer(displayElement) {
            timerStartTime = Date.now();
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - timerStartTime) / 1000);
                displayElement.textContent = formatTime(elapsed);
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            return Math.floor((Date.now() - timerStartTime) / 1000);
        }

        function formatTime(seconds) {
            const min = String(Math.floor(seconds / 60)).padStart(2, '0');
            const sec = String(seconds % 60).padStart(2, '0');
            return `${min}:${sec}`;
        }
        
        function showContainer(containerName) {
            Object.values(containers).forEach(c => c.classList.add('hidden'));
            if (containers[containerName]) {
                containers[containerName].classList.remove('hidden');
            }
        }

        function resetQuizState() {
            if (timerInterval) clearInterval(timerInterval);
            quizStartBtn.textContent = 'Select a story';
            quizStartBtn.disabled = true;
            
            Object.values(containers).forEach(c => {
                if(c.id !== 'selection-container' && c.id !== 'start-screen') {
                    c.classList.add('hidden');
                }
            });
            
            resultsSummary.classList.remove('hidden');
            reviewScreen.classList.add('hidden');
            reviewBtn.classList.add('hidden');
            sendDataBtn.classList.add('hidden');
            endBtn.classList.add('hidden');
            nextReviewBtn.textContent = 'Next Review';
            sendDataBtn.disabled = false;
            sendDataBtn.textContent = "전송";
            
            currentStoryData = {};
            currentQuizIndex = 0;
            userAnswers = [];
            incorrectQuestionIndices = [];
            currentReviewIndex = 0;
            quizTime = 0;
        }

        function returnToSelection() {
            resetQuizState();
            showContainer('selection');
            bottomControls.classList.remove('hidden');
            storySelect.value = '';
        }

        function resetApp() {
            resetQuizState();
            userName = '';
            userNameInput.value = '';
            storySelect.value = '';
            bottomControls.classList.add('hidden');
            showContainer('start');
        }

        // Initial setup
        resetApp();

    </script>
</body>
</html>